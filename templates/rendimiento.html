{% extends "base.html" %}
{% block content %}
<h3 class="mb-3">ğŸ“ˆ EvaluaciÃ³n del Modelo de Machine Learning</h3>

{% if not datos.sim_status %}
  <div class="alert alert-success">âœ… Modelo cargado correctamente - Mostrando mÃ©tricas reales</div>

  <div class="row g-3">
    <div class="col-6 col-md-3">
      <div class="metric-card">
        <small class="text-muted">ğŸ¯ RÂ² Score</small>
        <div class="h5 mb-0">{{ datos.r2 }}</div>
        <div class="small text-success">{{ datos.delta_r2 }}</div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="metric-card">
        <small class="text-muted">ğŸ“Š MAE</small>
        <div class="h5 mb-0">{{ datos.mae }}</div>
        <div class="small text-success">{{ datos.delta_mae }}</div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="metric-card">
        <small class="text-muted">ğŸ” RMSE</small>
        <div class="h5 mb-0">{{ datos.rmse }}</div>
        <div class="small text-success">{{ datos.delta_rmse }}</div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="metric-card">
        <small class="text-muted">âš¡ PrecisiÃ³n</small>
        <div class="h5 mb-0">{{ datos.acc }}</div>
        <div class="small text-success">{{ datos.delta_acc }}</div>
      </div>
    </div>
  </div>

  <h5 class="mt-4 mb-2">ğŸ² Importancia de las CaracterÃ­sticas</h5>
  <div class="mb-3">
    {{ charts.importance|safe if charts.importance }}
  </div>

  <h5 class="mt-4 mb-2">ğŸ“ˆ Curva de Aprendizaje</h5>
  <div class="mb-3">
    {{ charts.learning|safe if charts.learning }}
  </div>

{% else %}
  <div class="alert alert-warning">âš ï¸ Modelo no encontrado - Mostrando mÃ©tricas simuladas</div>

  <div class="row g-3">
    <div class="col-12 col-md-4">
      <div class="metric-card">
        <small class="text-muted">ğŸ¯ Estado</small>
        <div class="h5 mb-0">SimulaciÃ³n</div>
        <div class="small text-danger">Modelo no cargado</div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="metric-card">
        <small class="text-muted">ğŸ“Š PrecisiÃ³n Estimada</small>
        <div class="h5 mb-0">{{ datos.prec_est }}</div>
        <div class="small text-muted">Aproximada</div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="metric-card">
        <small class="text-muted">âš¡ Modo</small>
        <div class="h5 mb-0">Demo</div>
        <div class="small text-muted">Funcional</div>
      </div>
    </div>
  </div>

  <div class="alert alert-info mt-3">
    ğŸ’¡ <strong>Para ver mÃ©tricas reales del modelo:</strong>
    <ol class="mb-0">
      <li>Entrena tu modelo de Machine Learning</li>
      <li>GuÃ¡rdalo con <code>pickle</code></li>
      <li>SÃºbelo a HuggingFace (o ajusta las rutas)</li>
      <li>Reinicia la aplicaciÃ³n</li>
    </ol>
  </div>
{% endif %}
{% endblock %}
